<!DOCTYPE html>
<html>
<head>
<style>
html { background: #ffffff; }
body {
  width: 720pt; height: 405pt; margin: 0; padding: 0;
  background: #FFFFFF; font-family: Arial, sans-serif;
  display: flex; flex-direction: column;
}
.header {
  background: #0D1117; padding: 14pt 25pt;
}
.header h1 {
  color: #FFFFFF; font-size: 22pt; font-weight: bold; margin: 0;
}
.header-sub {
  color: #E33737; font-size: 10pt; margin: 2pt 0 0 0;
}
.content {
  flex: 1; padding: 15pt 25pt;
  display: flex; flex-direction: column; gap: 10pt;
}
.arch-row {
  display: flex; gap: 8pt; align-items: center;
}
.layer-box {
  flex: 1; padding: 10pt 12pt; border-radius: 5pt; text-align: center;
}
.layer-box h3 {
  font-size: 11pt; font-weight: bold; margin: 0;
  color: #FFFFFF;
}
.layer-box p {
  font-size: 9pt; margin: 3pt 0 0 0; color: rgba(255,255,255,0.85);
}
.presentation { background: #3498DB; }
.business { background: #9B59B6; }
.data { background: #27AE60; }
.arrow {
  color: #AAB7B8; font-size: 14pt;
}
.arrow-down {
  text-align: center; color: #AAB7B8; font-size: 14pt;
}
.worker-row {
  display: flex; gap: 8pt;
}
.worker-box {
  flex: 1; padding: 10pt 12pt; border-radius: 5pt; text-align: center;
}
.worker-box h3 {
  font-size: 11pt; font-weight: bold; margin: 0; color: #FFFFFF;
}
.worker-box p {
  font-size: 9pt; margin: 3pt 0 0 0; color: rgba(255,255,255,0.85);
}
.pipeline { background: #E33737; }
.llm { background: #0D1117; }
.external-row {
  display: flex; gap: 8pt;
}
.external-box {
  flex: 1; padding: 8pt 10pt; border-radius: 5pt; text-align: center;
}
.external-box h3 {
  font-size: 10pt; font-weight: bold; margin: 0; color: #FFFFFF;
}
.external-box p {
  font-size: 8pt; margin: 2pt 0 0 0; color: rgba(255,255,255,0.85);
}
.perplexity { background: #F39C12; }
.embedding { background: #16A085; }
.vector { background: #8E44AD; }
.deploy-info {
  display: flex; gap: 8pt; margin-top: 5pt;
}
.deploy-box {
  flex: 1; background: #F4F6F6; padding: 6pt 10pt; border-radius: 4pt;
  text-align: center;
}
.deploy-box p {
  color: #2E4053; font-size: 8pt; margin: 0;
}
.deploy-box span {
  color: #566573; font-size: 7pt;
}
</style>
</head>
<body>
<div class="header">
  <h1>System Architecture</h1>
  <p class="header-sub">3-Layer Architecture + Multi-Agent Pipeline</p>
</div>
<div class="content">
  <div class="arch-row">
    <div class="layer-box presentation">
      <h3>Presentation Layer</h3>
      <p>React 18 + TypeScript + Vite</p>
    </div>
    <span class="arrow">→</span>
    <div class="layer-box business">
      <h3>Business Layer</h3>
      <p>FastAPI + SQLAlchemy 2.0</p>
    </div>
    <span class="arrow">→</span>
    <div class="layer-box data">
      <h3>Data Layer</h3>
      <p>PostgreSQL + pgvector</p>
    </div>
  </div>
  <p class="arrow-down">↓</p>
  <div class="worker-row">
    <div class="worker-box pipeline">
      <h3>Pipeline Orchestrator</h3>
      <p>Celery 9-Stage + Redis</p>
    </div>
    <div class="worker-box llm">
      <h3>LLM Ensemble</h3>
      <p>Claude Opus 4.5 | GPT-5 | Gemini 3 Pro</p>
    </div>
  </div>
  <p class="arrow-down">↓</p>
  <div class="external-row">
    <div class="external-box perplexity">
      <h3>Web Intelligence</h3>
      <p>Perplexity sonar-pro</p>
    </div>
    <div class="external-box embedding">
      <h3>Embedding Engine</h3>
      <p>text-embedding-3-large</p>
    </div>
    <div class="external-box vector">
      <h3>Vector Store</h3>
      <p>pgvector HNSW 2000d</p>
    </div>
  </div>
  <div class="deploy-info">
    <div class="deploy-box">
      <p>Frontend: <b>Vercel</b></p>
      <span>rkyc-wine.vercel.app</span>
    </div>
    <div class="deploy-box">
      <p>Backend: <b>Railway</b></p>
      <span>rkyc-production.up.railway.app</span>
    </div>
    <div class="deploy-box">
      <p>Database: <b>Supabase</b></p>
      <span>Tokyo (ap-northeast-1)</span>
    </div>
    <div class="deploy-box">
      <p>Worker: <b>Railway</b></p>
      <span>Celery + Redis</span>
    </div>
  </div>
</div>
</body>
</html>
